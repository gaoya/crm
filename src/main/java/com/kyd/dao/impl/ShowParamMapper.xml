<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.kyd.dao.ShowParamMapper">
    <update id="update" parameterType="java.util.Map" >
      UPDATE sys_show_param
        <include refid="UPDATE_SQL"/>
      WHERE id=#{id}
    </update>

    <insert id="insert" parameterType="java.util.Map">
        INSERT  INTO
        sys_show_param
        (
id,
menuId,
menu_code,
p_id,
p_name,
p_placeholder,
p_label,
p_list,
p_listdata,
p_add,
p_update,
p_del,
p_defaultvalue,
p_user,
p_time,
p_sort,
p_remark,
p_search

        )
        VALUES
        (
#{id},
#{menuId},
#{menuCode},
#{pId},
#{pName},
#{pPlaceholder},
#{pLabel},
#{pList},
#{pListdata},
#{pAdd},
#{pUpdate},
#{pDel},
#{pDefaultvalue},
#{pUser},
timestamp(now()),
#{pSort},
#{pRemark},
#{pSearch}

        )
    </insert>
    <delete id="deleteById" parameterType="java.lang.Long">
      DELETE  FROM sys_show_param
      WHERE ID=#{id}
    </delete>

    <select id="findById" parameterType="java.lang.Long" resultType="java.util.Map">
      SELECT * FROM sys_show_param
      WHERE ID=#{id}
    </select>

    <select id="findAllByParam" parameterType="java.util.Map" resultType="java.util.Map">
      SELECT
      <include refid="COLUMN_SQL"/>
      FROM sys_show_param
      WHERE 1 =1
      <include refid="WHERE_SQL"/>

       limit
        <choose>
            <when test="startIndex==null  or startIndex ==''">
                0
            </when>
            <otherwise>
                #{startIndex}
            </otherwise>
        </choose> ,
        <choose>
            <when test="endIndex==null or endIndex ==''">
                10
            </when>
            <otherwise>#{endIndex}</otherwise>
        </choose>
    </select>

    <select id="findCount" parameterType="java.util.Map" resultType="java.lang.Long">
      select COUNT(1) from sys_show_param
      WHERE  1=1
      <include refid="WHERE_SQL"/>
    </select>

    <select id="findAllByPageParam" parameterType="java.util.Map" resultType="java.util.Map">
      SELECT
      <include refid="COLUMN_SQL"/>
      FROM sys_show_param
      WHERE 1=1
      <include refid="WHERE_SQL"/>
      limit
        <choose>
            <when test="startIndex!=null  and startIndex !=''">
                #{startIndex}
            </when>
            <otherwise>
               0
            </otherwise>
        </choose>
        ,
        <choose>
            <when test="endIndex!=null and endIndex !=''">
                #{endIndex}
            </when>
            <otherwise>
                10
            </otherwise>
        </choose>
    </select>

    <select id="findCountByPageParam" parameterType="java.util.Map" resultType="java.lang.Long">
      SELECT COUNT(1) size
      FROM sys_show_param
      WHERE 1=1
      <include refid="WHERE_SQL"/>
    </select>

    <sql id="COLUMN_SQL">
id as id,
menuId as menuId,
menu_code as menuCode,
p_id as pId,
p_name as pName,
p_placeholder as pPlaceholder,
p_label as pLabel,
p_list as pList,
p_listdata as pListdata,
p_add as pAdd,
p_update as pUpdate,
p_del as pDel,
p_defaultvalue as pDefaultvalue,
p_user as pUser,
p_time as pTime,
p_sort as pSort,
p_remark as pRemark,
p_search as pSearch

    </sql>

    <sql id="WHERE_SQL">
<if test="id != null">  AND id = #{id}  </if>
<if test="menuId != null">  AND menuId = #{menuId}  </if>
<if test="menuCode != null">  AND menu_code = #{menuCode}  </if>
<if test="pId != null">  AND p_id = #{pId}  </if>
<if test="pName != null">  AND p_name = #{pName}  </if>
<if test="pPlaceholder != null">  AND p_placeholder = #{pPlaceholder}  </if>
<if test="pLabel != null">  AND p_label = #{pLabel}  </if>
<if test="pList != null">  AND p_list = #{pList}  </if>
<if test="pListdata != null">  AND p_listdata = #{pListdata}  </if>
<if test="pAdd != null">  AND p_add = #{pAdd}  </if>
<if test="pUpdate != null">  AND p_update = #{pUpdate}  </if>
<if test="pDel != null">  AND p_del = #{pDel}  </if>
<if test="pDefaultvalue != null">  AND p_defaultvalue = #{pDefaultvalue}  </if>
<if test="pUser != null">  AND p_user = #{pUser}  </if>
<if test="pTime != null">  AND p_time = timestamp(now())  </if>
<if test="pSort != null">  AND p_sort = #{pSort}  </if>
<if test="pRemark != null">  AND p_remark = #{pRemark}  </if>
<if test="pSearch != null">  AND p_search = #{pSearch}  </if>

    </sql>

    <sql id="UPDATE_SQL">
        <set>
<if test="id!=null">   id=#{id}, </if>
<if test="menuId!=null">   menuId=#{menuId}, </if>
<if test="menuCode!=null">   menu_code=#{menuCode}, </if>
<if test="pId!=null">   p_id=#{pId}, </if>
<if test="pName!=null">   p_name=#{pName}, </if>
<if test="pPlaceholder!=null">   p_placeholder=#{pPlaceholder}, </if>
<if test="pLabel!=null">   p_label=#{pLabel}, </if>
<if test="pList!=null">   p_list=#{pList}, </if>
<if test="pListdata!=null">   p_listdata=#{pListdata}, </if>
<if test="pAdd!=null">   p_add=#{pAdd}, </if>
<if test="pUpdate!=null">   p_update=#{pUpdate}, </if>
<if test="pDel!=null">   p_del=#{pDel}, </if>
<if test="pDefaultvalue!=null">   p_defaultvalue=#{pDefaultvalue}, </if>
<if test="pUser!=null">   p_user=#{pUser}, </if>
<if test="pTime!=null">   p_time=timestamp(now()), </if>
<if test="pSort!=null">   p_sort=#{pSort}, </if>
<if test="pRemark!=null">   p_remark=#{pRemark}, </if>
<if test="pSearch!=null">   p_search=#{pSearch} </if>

        </set>
    </sql>
</mapper>
